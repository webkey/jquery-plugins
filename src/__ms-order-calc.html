@@include('_tpl_layout_head.html', {
	"title": "Расчет количества и цены товаров при заказе. Наример, в корзине",
	"pathCss": ["js/jquery-ui/jquery-ui.css", "css/plugins/ms-order-calc.css", "css/plugins/ms-order-calc--theme.css"],
	"pageClass": "page-example-jq-plugin"
})

<div class="layout-flood user-content">

	<h1>Расчет количества и цены товаров при заказе. Наример, в корзине</h1>
	<h2>Пример с проекта Свитанок</h2>

	<p><i>* Примечание:</i> для работы спиннера (выбор количества товаров) нужно подключить jquery-ui.js и скопировать скрипт запрещающий ввод нечисловых значений в поле (/** only number input */)</p>

	<p>Цену указывать в data-price атрибуте элемента с ценой, например</p>
	<pre>&lt;div class="order-calc__price-js" data-price="40"&gt;40 р.&lt;/div&gt;</pre>

	<h2><span class="mark">Callback</span></h2>

	<h3>created</h3>
	<p>Вызов вконце функции init()</p>
	<pre>created: function () {}</pre>

	<h3>getTotalResults</h3>
	<p>После пересчета общего количества товаров и их суммарной цены</p>
	<pre>getTotalResults: function (e, el, results) {
		console.log("results: ", results);
	}</pre>
	<p>Параметры:</p>
	<ul>
		<li><i>results</i> - объект со значениями:
			<ul>
				<li><i>results.totalCount</i> - общее количество товаров</li>
				<li><i>results.totalPrice</i> - суммарная цена</li>
			</ul>
		</li>
	</ul>

	<h3>createdObjParams</h3>
	<p>После создания нового объекта продуктов по id и их параметро</p>
	<pre>createdObjParams: function (e, el, obj) {
		console.log("obj: ", obj);
	}</pre>
	<p>Параметры:</p>
	<ul>
		<li><i>obj</i> - объект с id продуктов</li>
	</ul>

	<h3>showedWarningRemoveItem</h3>
	<p>После того, как появляется уведомлении об удалении элемента (с возможностью отмены удаления). Событие происходит <b>после</b> пересчета общего результата (<b>после</b> события getTotalResults). Это можно использовать для блокировки кнопки отправки формы, пока "висит" предупреждение. См. в примере на этой странице. Параметр <i><b>warningRemove</b></i> должен иметь значение <i>true</i></p>
	<pre>showedWarningRemoveItem: function (e, el) {}</pre>

	<h3>canceledRemoveItem</h3>
	<p>После отмены удаления элемента. Событие происходит <b>до</b> пересчета общего результата (<b>до</b> события getTotalResults). Это можно использовать для блокировки кнопки отправки формы, пока "висит" предупреждение. См. в примере на этой странице. Параметр <i><b>warningRemove</b></i> должен иметь значение <i>true</i></p>
	<pre>showedWarningRemoveItem: function (e, el) {}</pre>

	<h3>removedItem</h3>
	<p>После удаления одного элемента.</p>
	<pre>removedItem: function (e, el) {}</pre>

	<h3>removedAllItems</h3>
	<p>После удаления всех элементов</p>
	<pre>removedAllItems: function (e, el) {}</pre>

	<h2>Таблица 1</h2>
	<div class="bottom-space">
		<div class="order-calc-js">
			<div class="c-table">
				<div class="c-thead">
					<div class="c-tr">
						@@loop("_tpl_c-thead.html", "includes/json/order-calc__th--cart.json")
					</div>
				</div>
				<div class="c-tbody">
					@@loop("_tpl_order-calc-items--cart.html", "includes/json/order-calc__items--01.json")
				</div>
			</div>
			<div class="c-table-result">
				<div class="c-table-result__total hide-before-calc order-calc__total-results-js">
					<div class="c-table-result__label">Итого:</div>
					<span class="c-table-result__count order-calc__counts-total-js">0</span> позиций на&nbsp;<span class="c-table-result__price order-calc__price-total-js">0</span>&nbsp;руб.
				</div>
				<button class="btn-default order-calc-btn float-right" disabled>Заказать</button>
			</div>
			<div class="order-calc__empty">Ваша корзина пуста</div>
		</div>
	</div>

	<h2>Таблица 2</h2>

	<div class="bottom-space">
		<div class="order-calc-js">
			<div class="c-table">
				<div class="c-thead">
					<div class="c-tr">
						@@loop("_tpl_c-thead.html", "includes/json/order-calc__th--cart.json")
					</div>
				</div>
				<div class="c-tbody">
					@@loop("_tpl_order-calc-items--cart.html", "includes/json/order-calc__items--02.json")
				</div>
			</div>
			<div class="c-table-result">
				<div class="c-table-result__total hide-before-calc order-calc__total-results-js">
					<div class="c-table-result__label">Итого:</div>
					<span class="c-table-result__count order-calc__counts-total-js">0</span> позиций на&nbsp;<span class="c-table-result__price order-calc__price-total-js">0</span>&nbsp;руб.
				</div>
				<button class="btn-default order-calc-btn float-right" disabled>Заказать</button>
			</div>
			<div class="order-calc__empty">Ваша корзина пуста</div>
		</div>
	</div>

	<h2>Таблица 3</h2>

	<div class="bottom-space" id="orderCalcCreate">
		<!--ajax template-->
	</div>

	<h2>Таблица 4</h2>

	<div class="bottom-space">
		<div class="order-calc-js--alt">
			<div class="c-table">
				<div class="c-thead">
					<div class="c-tr">
						@@loop("_tpl_c-thead.html", "includes/json/order-calc__th--cart.json")
					</div>
				</div>
				<div class="c-tbody">
					@@loop("_tpl_order-calc-items--cart.html", "includes/json/order-calc__items--03.json")
				</div>
			</div>
			<div class="c-table-result">
				<div class="c-table-result__total hide-before-calc order-calc__total-results-js">
					<div class="c-table-result__label">Итого:</div>
					<span class="c-table-result__count order-calc__counts-total-js">0</span> позиций на&nbsp;<span class="c-table-result__price order-calc__price-total-js">0</span>&nbsp;руб.
				</div>
				<button class="btn-default order-calc-btn float-right" disabled>Заказать</button>
			</div>
			<div class="order-calc__empty">Ваша корзина пуста</div>
		</div>
	</div>

</div>

@@include('_tpl_layout_foot.html', {
	"pathJs": ["js/jquery-ui/jquery-ui.min.js", "js/plugins/jquery.ms-order-calc.js", "js/common-ms-order-calc.js"]
})